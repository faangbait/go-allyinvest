<html>
 <head>
  <style type="text/css">
   .callout { background-color: #6ae6ef; }
   .highlight { background-color: #dee2e6; padding:2ch; }
  </style>
  <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" rel="stylesheet"/>
 </head>
 <body class="bg-light">
  <div class="container">
   <div class="col-sm-9">
    <h2>
     Streaming
    </h2>
    <h3>
     Overview
    </h3>
    <p>
     We've enabled a streaming endpoint to for requesting both quote and trade data utilizing a persistent HTTP socket connection. Streaming data from the API consists of making an
     <a href="authentication.html">
      Authenticated
     </a>
     HTTP request and leaving the HTTP socket
     <strong>
      open
     </strong>
     to continually receive data.
    </p>
    <h3>
     API Streaming Endpoint
    </h3>
    <pre class="text-center callout">https://devapi-stream.invest.ally.com/v1/</pre>
    <h3>
     Request Format
    </h3>
    <p>
     You can request streaming data for all standard equity and option symbols. The format of option symbols must be sent in
     <a href="streaming-market-quotes-get-post.html">
      OCC symbology
     </a>
     . At this time, we can only permit
     <strong>
      256 symbols to be streamed per request
     </strong>
     and/or a
     <strong>
      maximum of 256 symbols streaming, per user, across multiple requests
     </strong>
     .
    </p>
    <ul>
     <li>
      <a href="streaming-market-quotes-get-post.html">
       GET market/quotes
      </a>
     </li>
     <li>
      <a href="streaming-market-quotes-get-post.html">
       POST market/quotes
      </a>
     </li>
    </ul>
    <h3>
     Response Format
    </h3>
    <p>
     The data returned through the streaming endpoints will be much slimmer than request/response market data requests. Due to the nature of streaming data, the number of field ids is limited to relevant data only.
    </p>
    <p>
     You will also notice some fluctuation in the presence of some data points (i.e. hi, lo, bidtick). One important note is that the
     <strong>
      streaming endpoints only return updates for data points when an change occurs.
     </strong>
    </p>
    <p>
     If a additional field ids are required for your application, we recommend making a request to standard market data endpoints and supplementing that data with streaming changes.
    </p>
    <p>
     JSON and XML are both supported response types.
    </p>
    <h3>
     Data
    </h3>
    <p>
     Data is packaged into two different payloads. Each payload serves a unique purpose and is triggered on specific events.
The quote payload is triggered on any change in value of a quote data point for a given security.
    </p>
    <p>
     <strong>
      Quote
     </strong>
    </p>
    <div class="highlight">
     <pre><span class="nt">&lt;quote&gt;</span>
    <span class="nt">&lt;symbol&gt;</span>AAPL<span class="nt">&lt;/symbol&gt;</span>
    <span class="nt">&lt;exch&gt;</span>6<span class="nt">&lt;/exch&gt;</span>
    <span class="nt">&lt;bid&gt;</span>426.2<span class="nt">&lt;/bid&gt;</span>
    <span class="nt">&lt;bidsz&gt;</span>1<span class="nt">&lt;/bidsz&gt;</span>
    <span class="nt">&lt;bidtick&gt;</span>3<span class="nt">&lt;/bidtick&gt;</span>
    <span class="nt">&lt;ask&gt;</span>426.3<span class="nt">&lt;/ask&gt;</span>
    <span class="nt">&lt;asksz&gt;</span>2<span class="nt">&lt;/asksz&gt;</span>
    <span class="nt">&lt;qcond&gt;</span>R<span class="nt">&lt;/qcond&gt;</span>
    <span class="nt">&lt;timestamp&gt;</span>2012-01-19T17:41:48-05:00<span class="nt">&lt;/timestamp&gt;</span>
<span class="nt">&lt;/quote&gt;</span>
</pre>
    </div>
    <p>
     The trade payload is triggered when a new trade is reported for a given security.
     <br/>
     <strong>
      Trade
     </strong>
    </p>
    <div class="highlight">
     <pre><span class="nt">&lt;trade&gt;</span>
    <span class="nt">&lt;symbol&gt;</span>QQQ<span class="nt">&lt;/symbol&gt;</span>
    <span class="nt">&lt;exch&gt;</span>19<span class="nt">&lt;/exch&gt;</span>
    <span class="nt">&lt;last&gt;</span>59.5571<span class="nt">&lt;/last&gt;</span>
    <span class="nt">&lt;vl&gt;</span>335<span class="nt">&lt;/vl&gt;</span>
    <span class="nt">&lt;vwap&gt;</span>59.9067<span class="nt">&lt;/vwap&gt;</span>
    <span class="nt">&lt;cvol&gt;</span>20515140<span class="nt">&lt;/cvol&gt;</span>
    <span class="nt">&lt;datetime&gt;</span>2012-01-23T12:57:38-05:00<span class="nt">&lt;/datetime&gt;</span>
    <span class="nt">&lt;timestamp&gt;</span>1327341458<span class="nt">&lt;/timestamp&gt;</span>
<span class="nt">&lt;/trade&gt;</span>
</pre>
    </div>
   </div>
  </div>
 </body>
</html>
